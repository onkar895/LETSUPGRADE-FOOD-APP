import { visit, ArrayElement } from '@swagger-api/apidom-core';
import { getNodeType, keyMap } from '@swagger-api/apidom-ns-openapi-3-1';
/**
 * This file contains logic for translating Standard Identifier to value.
 */

const visitorOptions = {
  keyMap,
  nodeTypeGetter: getNodeType
};
const access = (selected, standardIdentifier) => {
  const strStandardIdentifier = String(standardIdentifier.toValue());
  const values = new ArrayElement();
  const visitor = {
    enter(element) {
      if (!element.meta.hasKey('ads-a-standard-identifier')) return;
      element.meta.get('ads-a-standard-identifier').content.filter(accessorMapping => {
        return String(accessorMapping.get('subject').toValue()) === strStandardIdentifier;
      }).forEach(accessorMapping => {
        values.push(accessorMapping.get('value'));
      });
    }
  };
  visit(selected, visitor, visitorOptions);
  return values;
};
export default access;